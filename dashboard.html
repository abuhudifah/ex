<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة المندوب - نظام أبو حذيفة</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --dark-blue: #0d1b2a;
            --medium-blue: #1b263b;
            --light-blue: #3d5a80;
            --accent: #ee6c4d;
            --text-light: #e0e1dd;
            --text-dark: #293241;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: var(--text-dark);
            line-height: 1.6;
        }

        .navbar {
            background-color: var(--dark-blue);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar .logo img {
            height: 40px;
            filter: brightness(0) invert(1);
        }

        .navbar h2 {
            font-weight: 700;
            font-size: 1.3rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .logout-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: #d85a3c;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            background: white;
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: var(--light-blue);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab-btn:hover,
        .tab-btn.active {
            background: var(--dark-blue);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .form-group {
            margin-bottom: 1.5rem;
            text-align: right;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark-blue);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--light-blue);
        }

        button {
            background-color: var(--dark-blue);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: var(--medium-blue);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        table th,
        table td {
            padding: 1rem;
            text-align: right;
            border-bottom: 1px solid #eee;
        }

        table th {
            background-color: var(--dark-blue);
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        tr:hover {
            background-color: #e9ecef;
        }

        .search-box {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1.5rem;
            font-family: inherit;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--light-blue);
        }

        .client-item {
            padding: 0.75rem;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background 0.2s;
        }

        .client-item:hover {
            background: #e9ecef;
        }

        .dropdown {
            position: relative;
            width: 100%;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
        }

        .dropdown.active .dropdown-menu {
            display: block;
        }

        .actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-edit {
            background: #ffc107;
            color: #212529;
            padding: 0.3rem 0.6rem;
            font-size: 0.85rem;
        }

        .btn-delete {
            background: #dc3545;
            padding: 0.3rem 0.6rem;
            font-size: 0.85rem;
        }

        /* تنبيهات الألوان */
        .overdue {
            background-color: #ffebee !important;
            color: #c62828 !important;
            font-weight: 700;
        }

        .due-today {
            background-color: #fff8e1 !important;
            color: #ff8f00 !important;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .tabs {
                justify-content: center;
            }

            .container {
                padding: 0 0.5rem;
            }

            .tab-content {
                padding: 1rem;
            }

            table th,
            table td {
                padding: 0.75rem;
                font-size: 0.9rem;
            }
        }

        .success {
            color: #2a9d8f;
            font-weight: 600;
            margin-top: 1rem;
        }

        .error {
            color: #e63946;
            font-weight: 600;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <img src="https://i.ibb.co/LDSLfqXy/abohuthaifa-logo.png" alt="شعار أبو حذيفة">
        </div>
        <h2>لوحة المندوب</h2>
        <div class="user-info">
            <span id="userNameDisplay">👤 المستخدم</span>
            <button class="logout-btn" id="logoutBtn">تسجيل خروج</button>
        </div>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab-btn active" data-tab="receivables">المستحقات</button>
            <button class="tab-btn" data-tab="collection">إدخال تحصيل</button>
            <button class="tab-btn" data-tab="clearance">إدخال إخلاء</button>
        </div>

        <!-- تبويب المستحقات -->
        <div id="receivables" class="tab-content active">
            <h3>📋 قائمة المستحقات</h3>
            <input type="text" id="searchReceivable" class="search-box" placeholder="ابحث عن عميل...">
            <table id="receivablesTable">
                <thead>
                    <tr>
                        <th>اسم العميل</th>
                        <th>المبلغ المستحق</th>
                        <th>تاريخ الاستحقاق</th>
                        <th>الحالة</th>
                        <th>الإجراءات</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- سيتم ملؤها تلقائيًا -->
                </tbody>
            </table>
        </div>

        <!-- تبويب إدخال تحصيل -->
        <div id="collection" class="tab-content">
            <h3>➕ إدخال تحصيل جديد</h3>
            <form id="collectionForm">
                <div class="form-group">
                    <label for="clientName">اسم العميل</label>
                    <div class="dropdown" id="clientDropdown">
                        <input type="text" id="clientSearch" placeholder="ابدأ بالكتابة للبحث عن عميل..." autocomplete="off">
                        <div class="dropdown-menu" id="clientList">
                            <!-- سيتم ملؤها تلقائيًا -->
                        </div>
                    </div>
                    <input type="hidden" id="selectedClient">
                </div>
                <div class="form-group">
                    <label for="collectedAmount">المبلغ المحصل</label>
                    <input type="number" id="collectedAmount" required min="1" placeholder="أدخل المبلغ">
                </div>
                <div class="form-group">
                    <label for="operationType">نوع العملية</label>
                    <select id="operationType" required>
                        <option value="">اختر النوع</option>
                        <option value="تحويل">تحويل</option>
                        <option value="صرافة">صرافة</option>
                        <option value="خدمة أخرى">خدمة أخرى</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="notes">ملاحظات</label>
                    <textarea id="notes" rows="3" placeholder="أدخل أي ملاحظات إضافية"></textarea>
                </div>
                <button type="submit">تسجيل التحصيل</button>
                <div id="collectionMessage" class="success"></div>
            </form>
        </div>

        <!-- تبويب إدخال إخلاء -->
        <div id="clearance" class="tab-content">
            <h3>💰 إدخال إخلاء جديد</h3>
            <form id="clearanceForm">
                <div class="form-group">
                    <label for="clearanceType">نوع الإخلاء</label>
                    <select id="clearanceType" required>
                        <option value="">اختر النوع</option>
                        <option value="إيداع بنكي">إيداع بنكي</option>
                        <option value="نثريات">نثريات</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="clearanceAmount">المبلغ</label>
                    <input type="number" id="clearanceAmount" required min="1" placeholder="أدخل المبلغ">
                </div>
                <div class="form-group" id="expenseItemGroup" style="display:none;">
                    <label for="expenseItem">بند النثريات</label>
                    <select id="expenseItem">
                        <option value="وقود">وقود</option>
                        <option value="مواصلات">مواصلات</option>
                        <option value="عمولة">عمولة</option>
                        <option value="إعاشة">إعاشة</option>
                        <option value="أخرى">أخرى</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="clearanceDetails">تفاصيل</label>
                    <textarea id="clearanceDetails" rows="3" placeholder="أدخل التفاصيل"></textarea>
                </div>
                <button type="submit">تسجيل الإخلاء</button>
                <div id="clearanceMessage" class="success"></div>
            </form>
        </div>
    </div>

    <script>
        // بيانات العملاء من ملف حسابات.xlsx
        const CLIENTS = [
            "بلال محمد عبدالله علي الوصابي",
            "حسام علي عبد الغني امين الفاتكي",
            "عقيل عبدالعزيز علي احمد",
            "عبدالله غالب علي عبدالله",
            "هاشم عبدالرحمن هاشم عبدالله",
            "سامي عبدالله سالم صالح",
            "اسامة يوسف ابراهيم السلمي",
            "علي صالح مثنى عثمان",
            "عبدالله عبدالاله عبده احمد",
            "عبدالله عبده محمد حسن الحمادي",
            "وليد محمد عبده قائد الحداد",
            "احمد علي محسن منصور",
            "وسيم علي حميد عبدالله",
            "ياسين طه سعيد محمد قائد",
            "محمد حسين صالح منصور قلعوب",
            "هيثم احمد علي عبدالعزيز",
            "صلاح مهيوب سلام سيف الحمادي",
            "مصلح احمد حسين العنبي",
            "علي قايد علي الشميري",
            "علي محمد عوض الحداد المصعبي",
            "حسن عبدالغني علي محمد",
            "فهد طه محمد مصلح احمد",
            "عبدالسلام عبدالله علي الرعيني",
            "بسام عبده ثابت الصلوي",
            "بسام حفظ الله عبدالله العماد",
            "رياض محمود سيف فارع",
            "علاء ابوالقاسم يحيى محمد القعيش",
            "عمر حميد علي احمد",
            "وسام ناصر حزام جراده",
            "وليد احمد فتح الله عقيه",
            "عدي طه محمد مصلح",
            "فتح محمد محمد السمحي",
            "عبدالله احمد محمد عساج",
            "شمسان محمد عبدالله الدحملي",
            "نجم الدين محمد ديوان خالد",
            "مركز الاحمدي للجوالات الذكية",
            "محمد يحيى ناصر قاسم",
            "عدنان عبدالله سعيد محمد العامري",
            "يونس عبده صالح العمري",
            "انور عبد احمد الصغير",
            "عبدالناصر محمد عبدالله شرف",
            "محمد امين محمد عبدالرب",
            "غازي عبده اسماعيل المنتصر",
            "قابوس فرحان مرشد محمد",
            "مؤسسة روابي للمقاولات العامه",
            "عمار علي شوعي زوعان",
            "يوسف عبدربه احمد يوسف",
            "حساب وسيط قيود",
            "جمال جميل عبدالله مغلس قاسم",
            "سلطان عبدالله قاسم محمد",
            "محمد سعيد احمد ابراهيم",
            "نجم الدين سمير عبده حسن الخولاني",
            "علاء محمد علي حسن المعلمي",
            "محسن صالح علي سعيد لسود",
            "محمد علي احمد غالب الشراعي",
            "عاصم خالد عبدالله محسن سهيل",
            "علي محمد علي السليماني",
            "هايل علي صالح علي الشلوف",
            "طه محمد حسين المشيرعي",
            "رعد علي احمد شامي",
            "تحصيل وتساليم ظهران",
            "جميل محمد احمد سعيد",
            "حمدي رزق محمد مصلح شطيف",
            "فؤاد احمد عبدالحميد السيد",
            "بشير عبده سيف الحكمي",
            "مجد عبدالرحيم علي علي الشعيبي",
            "رشيد عبدالله حسن الريمي",
            "اوسان عبدالباقي علي ناجي القدسي",
            "صدام حسين حسين جبار",
            "المنذر عبدالحميد محمد عبدالله الوصابي",
            "عبدالله صالح صالح غراد",
            "محمد درهم يحيى المعيضي",
            "حافظ حسن علي حمود الشهاري",
            "قصي طه محمد مصلح العواضي",
            "ابو بكر سالم يحيى قاسم بعيصي",
            "نواف امين علي محمد النظاري",
            "عبدالعزيز محمد عبدالله علي الوصابي",
            "مالك احمد عبدالله علي الوصابي",
            "عبداللطيف محمد عبدالله علي الوصابي",
            "بشار محمد ابوالقاسم يحيى القعيش",
            "حبيب عبداللطيف محمد عبدالله الوصابي",
            "صلاح محمد قائد حمود الخياط",
            "محمد راجح يحيى قاسم راجح",
            "محمد امين علي النظاري",
            "محمد عبدالحميد محمد عبدالله الوصابي",
            "نور الدين محمد سعدالله يحيى راجح",
            "هجرس كمال احمد عبدالله"
        ];

        // بيانات المستحقات (تخزين محلي)
        let receivables = JSON.parse(localStorage.getItem('receivables')) || [];
        let collections = JSON.parse(localStorage.getItem('collections')) || [];
        let clearances = JSON.parse(localStorage.getItem('clearances')) || [];

        // حفظ البيانات
        function saveData() {
            localStorage.setItem('receivables', JSON.stringify(receivables));
            localStorage.setItem('collections', JSON.stringify(collections));
            localStorage.setItem('clearances', JSON.stringify(clearances));
        }

        document.addEventListener('DOMContentLoaded', function() {
            // التحقق من تسجيل الدخول
            const user = localStorage.getItem('loggedInUser');
            if (!user) {
                window.location.href = 'index.html';
                return;
            }
            document.getElementById('userNameDisplay').textContent = `👤 ${user}`;

            // تسجيل الخروج
            document.getElementById('logoutBtn').addEventListener('click', function() {
                localStorage.removeItem('loggedInUser');
                window.location.href = 'index.html';
            });

            // تبديل التبويبات
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(btn.dataset.tab).classList.add('active');
                });
            });

            // تحميل المستحقات
            loadReceivables();

            // البحث في المستحقات
            document.getElementById('searchReceivable').addEventListener('input', function() {
                filterReceivables(this.value);
            });

            // إعداد البحث الذكي عن العميل
            const clientSearch = document.getElementById('clientSearch');
            const clientList = document.getElementById('clientList');
            const clientDropdown = document.getElementById('clientDropdown');
            const selectedClient = document.getElementById('selectedClient');

            clientSearch.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                clientList.innerHTML = '';
                
                if (searchTerm.length === 0) {
                    clientDropdown.classList.remove('active');
                    return;
                }

                const filteredClients = CLIENTS.filter(client => 
                    client.toLowerCase().includes(searchTerm)
                );

                if (filteredClients.length > 0) {
                    clientDropdown.classList.add('active');
                    filteredClients.forEach(client => {
                        const div = document.createElement('div');
                        div.className = 'client-item';
                        div.textContent = client;
                        div.addEventListener('click', function() {
                            clientSearch.value = client;
                            selectedClient.value = client;
                            clientDropdown.classList.remove('active');
                        });
                        clientList.appendChild(div);
                    });
                } else {
                    clientDropdown.classList.remove('active');
                }
            });

            // إغلاق القائمة عند النقر خارجها
            document.addEventListener('click', function(e) {
                if (!clientDropdown.contains(e.target)) {
                    clientDropdown.classList.remove('active');
                }
            });

            // إظهار/إخفاء حقل النثريات
            document.getElementById('clearanceType').addEventListener('change', function() {
                const expenseItemGroup = document.getElementById('expenseItemGroup');
                if (this.value === 'نثريات') {
                    expenseItemGroup.style.display = 'block';
                } else {
                    expenseItemGroup.style.display = 'none';
                }
            });

            // إدخال تحصيل جديد
            document.getElementById('collectionForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const client = selectedClient.value || clientSearch.value;
                const amount = parseFloat(document.getElementById('collectedAmount').value);
                const operationType = document.getElementById('operationType').value;
                const notes = document.getElementById('notes').value;
                const agent = localStorage.getItem('loggedInUser');

                if (!client || client.trim() === '') {
                    document.getElementById('collectionMessage').textContent = '❌ يرجى اختيار عميل صالح';
                    return;
                }

                if (isNaN(amount) || amount <= 0) {
                    document.getElementById('collectionMessage').textContent = '❌ يرجى إدخال مبلغ صالح';
                    return;
                }

                // إضافة التحصيل
                const collection = {
                    id: Date.now(),
                    date: new Date().toISOString().split('T')[0],
                    client,
                    amount,
                    operationType,
                    agent,
                    notes
                };
                collections.push(collection);

                // تحديث المستحقات
                updateReceivables(client, amount);

                // حفظ البيانات
                saveData();

                // إعادة تعيين النموذج
                this.reset();
                selectedClient.value = '';
                document.getElementById('collectionMessage').textContent = '✅ تم تسجيل التحصيل بنجاح!';
                setTimeout(() => {
                    document.getElementById('collectionMessage').textContent = '';
                }, 3000);

                // تحديث عرض المستحقات
                loadReceivables();
            });

            // إدخال إخلاء جديد
            document.getElementById('clearanceForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const type = document.getElementById('clearanceType').value;
                const amount = parseFloat(document.getElementById('clearanceAmount').value);
                const details = document.getElementById('clearanceDetails').value;
                const expenseItem = document.getElementById('expenseItem')?.value || '';
                const agent = localStorage.getItem('loggedInUser');

                if (isNaN(amount) || amount <= 0) {
                    document.getElementById('clearanceMessage').textContent = '❌ يرجى إدخال مبلغ صالح';
                    return;
                }

                // إضافة الإخلاء
                const clearance = {
                    id: Date.now(),
                    date: new Date().toISOString().split('T')[0],
                    type,
                    amount,
                    agent,
                    details,
                    expenseItem
                };
                clearances.push(clearance);

                // حفظ البيانات
                saveData();

                // إعادة تعيين النموذج
                this.reset();
                document.getElementById('expenseItemGroup').style.display = 'none';
                document.getElementById('clearanceMessage').textContent = '✅ تم تسجيل الإخلاء بنجاح!';
                setTimeout(() => {
                    document.getElementById('clearanceMessage').textContent = '';
                }, 3000);
            });
        });

        function loadReceivables() {
            const tableBody = document.querySelector('#receivablesTable tbody');
            tableBody.innerHTML = '';

            receivables.forEach((receivable, index) => {
                const row = document.createElement('tr');
                
                // تطبيق الألوان حسب التاريخ
                const dueDate = new Date(receivable.dueDate);
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                if (dueDate < today) {
                    row.classList.add('overdue');
                } else if (dueDate.getTime() === today.getTime()) {
                    row.classList.add('due-today');
                }

                row.innerHTML = `
                    <td>${receivable.client}</td>
                    <td>${receivable.amount.toLocaleString()} ريال</td>
                    <td>${receivable.dueDate}</td>
                    <td>${receivable.status}</td>
                    <td class="actions">
                        <button class="btn-edit" onclick="editReceivable(${index})">تعديل</button>
                        <button class="btn-delete" onclick="deleteReceivable(${index})">حذف</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        function filterReceivables(searchTerm) {
            const tableBody = document.querySelector('#receivablesTable tbody');
            tableBody.innerHTML = '';

            const filtered = receivables.filter(r => 
                r.client.toLowerCase().includes(searchTerm.toLowerCase())
            );

            filtered.forEach((receivable, index) => {
                const row = document.createElement('tr');
                
                const dueDate = new Date(receivable.dueDate);
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                if (dueDate < today) {
                    row.classList.add('overdue');
                } else if (dueDate.getTime() === today.getTime()) {
                    row.classList.add('due-today');
                }

                row.innerHTML = `
                    <td>${receivable.client}</td>
                    <td>${receivable.amount.toLocaleString()} ريال</td>
                    <td>${receivable.dueDate}</td>
                    <td>${receivable.status}</td>
                    <td class="actions">
                        <button class="btn-edit" onclick="editReceivable(${index})">تعديل</button>
                        <button class="btn-delete" onclick="deleteReceivable(${index})">حذف</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        function updateReceivables(client, collectedAmount) {
            // البحث عن مستحق لهذا العميل
            const existingReceivableIndex = receivables.findIndex(r => r.client === client && r.status === 'مفتوح');
            
            if (existingReceivableIndex !== -1) {
                const existingReceivable = receivables[existingReceivableIndex];
                if (collectedAmount >= existingReceivable.amount) {
                    // تم التحصيل الكامل
                    existingReceivable.status = 'مسوّى';
                } else {
                    // تم التحصيل الجزئي
                    existingReceivable.amount -= collectedAmount;
                }
            } else {
                // لا يوجد مستحق - يمكن إنشاء واحد إذا أردت
                // أو تجاهله كما طلبت (يبدأ من الصفر)
            }
        }

        function editReceivable(index) {
            const receivable = receivables[index];
            const newAmount = prompt('أدخل المبلغ المستحق الجديد:', receivable.amount);
            if (newAmount !== null && !isNaN(newAmount) && parseFloat(newAmount) >= 0) {
                receivable.amount = parseFloat(newAmount);
                receivable.status = parseFloat(newAmount) > 0 ? 'مفتوح' : 'مسوّى';
                saveData();
                loadReceivables();
                alert('✅ تم تحديث المستحق بنجاح!');
            }
        }

        function deleteReceivable(index) {
            if (confirm('هل أنت متأكد أنك تريد حذف هذا المستحق؟')) {
                receivables.splice(index, 1);
                saveData();
                loadReceivables();
                alert('✅ تم حذف المستحق بنجاح!');
            }
        }
    </script>
</body>
</html>
